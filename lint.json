
> teh-raja@0.1.0 lint
> eslint --format json

[{"filePath":"D:\\TEHRAJA\\teh-raja\\app\\admin\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ActivityLog' is defined but never used.","line":4,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":84,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ActivityLog"},"fix":{"range":[133,146],"text":""},"desc":"Remove unused variable \"ActivityLog\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[483,501],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":20,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XCircle"},"fix":{"range":[501,510],"text":""},"desc":"Remove unused variable \"XCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":21,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[537,543],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleAvailability' is assigned a value but never used.","line":45,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":83},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\TEHRAJA\\teh-raja\\app\\admin\\page.tsx:60:23\n  58 |     });\n  59 |\n> 60 |     useEffect(() => { setIsClient(true); }, []);\n     |                       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  61 |\n  62 |     const handleLogin = (e: React.FormEvent) => {\n  63 |         e.preventDefault();","line":60,"column":23,"nodeType":null,"endLine":60,"endColumn":34},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":352,"column":57,"nodeType":"JSXOpeningElement","endLine":352,"endColumn":136},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":489,"column":111,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":489,"endColumn":114,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27500,27503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27500,27503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useProductStore, useSalesStore, useAuthStore, ExtendedProduct, ActivityLog } from \"@/lib/store\";\r\nimport { Line, Bar } from \"react-chartjs-2\";\r\nimport {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n} from \"chart.js\";\r\nimport {\r\n    Plus, Trash, Edit, LogOut, X, Save,\r\n    Image as ImageIcon, Download,\r\n    CheckCircle, XCircle, ShieldAlert,\r\n    History, User, AlertTriangle\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { nanoid } from \"nanoid\";\r\nimport ReportGenerator from \"@/components/ReportGenerator\"; // [NEW]\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend\r\n);\r\n\r\nexport default function AdminPage() {\r\n    const { user, login, logout } = useAuthStore();\r\n    const [loginUsername, setLoginUsername] = useState(\"\");\r\n    const [loginPassword, setLoginPassword] = useState(\"\");\r\n    const [loginError, setLoginError] = useState(\"\");\r\n\r\n    // Stores\r\n    const { products, addProduct, updateProduct, deleteProduct, toggleAvailability } = useProductStore();\r\n    const { getDailySales, getProductPopularity, orders, logs, addLog, resetData } = useSalesStore();\r\n    const [isClient, setIsClient] = useState(false);\r\n\r\n    // UI State\r\n    const [activeTab, setActiveTab] = useState<'dashboard' | 'products' | 'logs'>('dashboard');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [formData, setFormData] = useState<ExtendedProduct>({\r\n        id: '', name: '', price: 0, description: '',\r\n        image: '/images/royal-milk-tea.png', category: 'signature',\r\n        attributes: { sweet: 5, creamy: 5, fruity: 5 },\r\n        isAvailable: true, stock: 50, minStockThreshold: 10\r\n    });\r\n\r\n    useEffect(() => { setIsClient(true); }, []);\r\n\r\n    const handleLogin = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoginError(\"\");\r\n\r\n        if (loginUsername === \"admin\" && loginPassword === \"admin123\") {\r\n            login(\"admin\", \"admin\");\r\n            addLog(\"LOGIN\", \"Admin logged in\", \"Admin\");\r\n        } else if (loginUsername === \"kasir\" && loginPassword === \"kasir123\") {\r\n            login(\"kasir\", \"cashier\");\r\n            addLog(\"LOGIN\", \"Cashier logged in\", \"Kasir\");\r\n        } else {\r\n            setLoginError(\"Username atau Password salah!\");\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        addLog(\"LOGOUT\", `${user?.name} logged out`, user?.name || \"Unknown\");\r\n        logout();\r\n    };\r\n\r\n    const openAddModal = () => {\r\n        setEditingId(null);\r\n        setFormData({\r\n            id: nanoid(), name: '', price: 15000, description: '',\r\n            image: '/images/royal-milk-tea.png', category: 'signature',\r\n            attributes: { sweet: 5, creamy: 5, fruity: 5 },\r\n            isAvailable: true, stock: 50, minStockThreshold: 10\r\n        });\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const openEditModal = (product: ExtendedProduct) => {\r\n        setEditingId(product.id);\r\n        setFormData({ ...product });\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (!formData.name) return alert(\"Nama produk wajib diisi\");\r\n\r\n        if (editingId) {\r\n            updateProduct(editingId, formData);\r\n            addLog(\"UPDATE_PRODUCT\", `Updated product: ${formData.name}`, user?.name || \"Unknown\");\r\n        } else {\r\n            addProduct(formData);\r\n            addLog(\"CREATE_PRODUCT\", `Created product: ${formData.name}`, user?.name || \"Unknown\");\r\n        }\r\n        setIsModalOpen(false);\r\n    };\r\n\r\n    const handleDelete = (id: string, name: string) => {\r\n        if (confirm(`Yakin ingin menghapus ${name}?`)) {\r\n            deleteProduct(id);\r\n            addLog(\"DELETE_PRODUCT\", `Deleted product: ${name}`, user?.name || \"Unknown\");\r\n        }\r\n    }\r\n\r\n    const handleReset = () => {\r\n        if (confirm(\"PERINGATAN: Semua data penjualan akan dihapus permanen. Lanjutkan?\")) {\r\n            resetData();\r\n            addLog(\"RESET_DATA\", \"All sales data reset\", user?.name || \"Unknown\");\r\n            alert(\"Data berhasil direset.\");\r\n            window.location.reload();\r\n        }\r\n    }\r\n\r\n    const handleExportCSV = () => {\r\n        const headers = [\"Order ID\", \"Date\", \"Customer\", \"Items\", \"Total\"];\r\n        const rows = orders.map(order => [\r\n            order.id,\r\n            new Date(order.date).toLocaleString(),\r\n            order.customerName || \"Guest\",\r\n            order.items.map(i => `${i.name} (x${i.quantity})`).join(\"; \"),\r\n            order.total\r\n        ]);\r\n\r\n        const csvContent = \"data:text/csv;charset=utf-8,\"\r\n            + [headers.join(\",\"), ...rows.map(r => r.map(c => `\"${c}\"`).join(\",\"))].join(\"\\n\");\r\n\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", `laporan_penjualan_${new Date().toISOString().split('T')[0]}.csv`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        addLog(\"EXPORT_CSV\", \"Exported sales data to CSV\", user?.name || \"Unknown\");\r\n    }\r\n\r\n    // Charts Data\r\n    const dailySales = getDailySales();\r\n    const popularity = getProductPopularity();\r\n\r\n    const salesData = {\r\n        labels: dailySales.map(d => d.date),\r\n        datasets: [\r\n            {\r\n                label: \"Penjualan (Rp)\",\r\n                data: dailySales.map(d => d.total),\r\n                borderColor: \"#D4AF37\",\r\n                backgroundColor: \"rgba(212, 175, 55, 0.5)\",\r\n                yAxisID: 'y',\r\n            },\r\n            {\r\n                label: \"Jumlah Cup\",\r\n                data: dailySales.map(d => d.count),\r\n                borderColor: \"#1A4D3E\",\r\n                backgroundColor: \"rgba(26, 77, 62, 0.5)\",\r\n                yAxisID: 'y1',\r\n            }\r\n        ],\r\n    };\r\n\r\n    const popularityData = {\r\n        labels: popularity.map(p => p.name),\r\n        datasets: [\r\n            {\r\n                label: \"Terjual (Cup)\",\r\n                data: popularity.map(p => p.count),\r\n                backgroundColor: \"rgba(26, 77, 62, 0.8)\",\r\n            }\r\n        ]\r\n    };\r\n\r\n    if (!isClient) return null;\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-forest relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 z-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]\"></div>\r\n                <div className=\"p-8 glass rounded-2xl w-full max-w-md text-center bg-black/40 backdrop-blur-md border border-white/10 shadow-2xl z-10\">\r\n                    <div className=\"mb-6\">\r\n                        <h1 className=\"text-4xl font-serif text-gold font-bold\">TEH RAJA</h1>\r\n                        <p className=\"text-cream opacity-60 text-sm tracking-widest mt-2 uppercase\">Official Admin Panel</p>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleLogin} className=\"space-y-4\">\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"w-full p-4 bg-white/10 border border-white/10 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:border-gold transition\"\r\n                            placeholder=\"Username (admin / kasir)\"\r\n                            value={loginUsername}\r\n                            onChange={(e) => setLoginUsername(e.target.value)}\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"w-full p-4 bg-white/10 border border-white/10 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:border-gold transition\"\r\n                            placeholder=\"Password\"\r\n                            value={loginPassword}\r\n                            onChange={(e) => setLoginPassword(e.target.value)}\r\n                        />\r\n                        {loginError && <p className=\"text-red-400 text-sm bg-red-400/10 p-2 rounded\">{loginError}</p>}\r\n\r\n                        <button type=\"submit\" className=\"w-full py-4 bg-gold text-forest font-bold rounded-lg hover:bg-gold-light transition hover:scale-[1.02] shadow-lg shadow-gold/20\">\r\n                            Masuk Dashboard\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 pt-6 border-t border-white/10 text-xs text-white/30 flex justify-between\">\r\n                        <span>Â© 2024 Teh Raja</span>\r\n                        <span>v2.0.0 (Pro)</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 text-forest relative flex flex-col\">\r\n            {/* Admin Navbar */}\r\n            <nav className=\"bg-forest text-cream px-6 py-4 flex justify-between items-center shadow-lg sticky top-0 z-30\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <h1 className=\"text-xl font-serif font-bold text-gold\">TEH RAJA</h1>\r\n                    <span className=\"opacity-30\">|</span>\r\n                    <div className=\"flex gap-1 text-sm bg-black/20 rounded-lg p-1\">\r\n                        <button\r\n                            onClick={() => setActiveTab('dashboard')}\r\n                            className={`px-4 py-1.5 rounded-md transition ${activeTab === 'dashboard' ? 'bg-gold text-forest font-bold' : 'hover:bg-white/5'}`}\r\n                        >\r\n                            Dashboard\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('products')}\r\n                            className={`px-4 py-1.5 rounded-md transition ${activeTab === 'products' ? 'bg-gold text-forest font-bold' : 'hover:bg-white/5'}`}\r\n                        >\r\n                            Menu & Stok\r\n                        </button>\r\n                        {user.role === 'admin' && (\r\n                            <button\r\n                                onClick={() => setActiveTab('logs')}\r\n                                className={`px-4 py-1.5 rounded-md transition ${activeTab === 'logs' ? 'bg-gold text-forest font-bold' : 'hover:bg-white/5'}`}\r\n                            >\r\n                                Log Aktivitas\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-6 items-center\">\r\n                    <div className=\"text-right leading-tight hidden md:block\">\r\n                        <p className=\"font-bold text-sm text-gold\">{user.name}</p>\r\n                        <p className=\"text-xs opacity-60 uppercase tracking-wider\">{user.role}</p>\r\n                    </div>\r\n                    <div className=\"h-8 w-[1px] bg-white/10\"></div>\r\n                    <Link href=\"/\" target=\"_blank\" className=\"opacity-70 hover:opacity-100 flex items-center gap-2 text-sm\">\r\n                        Web Live <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n                    </Link>\r\n                    <button onClick={handleLogout} className=\"p-2 hover:bg-red-500/20 text-red-300 rounded-full transition\" title=\"Logout\">\r\n                        <LogOut size={18} />\r\n                    </button>\r\n                </div>\r\n            </nav>\r\n\r\n            <div className=\"flex-1 container mx-auto p-8\">\r\n\r\n                {activeTab === 'dashboard' && (\r\n                    <div className=\"animate-fade-in space-y-8\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <h2 className=\"text-2xl font-bold\">Laporan Kinerja</h2>\r\n                            <div className=\"flex gap-2\">\r\n                                <button onClick={handleExportCSV} className=\"flex items-center gap-2 text-forest bg-white border border-gray-200 px-4 py-2 rounded hover:bg-gray-50 shadow-sm\">\r\n                                    <Download size={16} /> CSV\r\n                                </button>\r\n                                <ReportGenerator orders={orders} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                            <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-96\">\r\n                                <h3 className=\"font-bold text-lg mb-4 text-forest flex items-center gap-2\">\r\n                                    <span className=\"w-1 h-6 bg-gold rounded-full\"></span> Tren Penjualan\r\n                                </h3>\r\n                                <Line data={salesData} options={{ responsive: true, maintainAspectRatio: false }} />\r\n                            </div>\r\n                            <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-96\">\r\n                                <h3 className=\"font-bold text-lg mb-4 text-forest flex items-center gap-2\">\r\n                                    <span className=\"w-1 h-6 bg-forest rounded-full\"></span> Produk Terpopuler\r\n                                </h3>\r\n                                <Bar data={popularityData} options={{ responsive: true, maintainAspectRatio: false }} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Admin Only Actions */}\r\n                        {user.role === 'admin' && (\r\n                            <div className=\"bg-red-50 p-6 rounded-xl border border-red-100 flex justify-between items-center\">\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-red-800 flex items-center gap-2\"><ShieldAlert size={18} /> Danger Zone</h4>\r\n                                    <p className=\"text-xs text-red-600\">Hati-hati, tindakan ini tidak dapat dibatalkan.</p>\r\n                                </div>\r\n                                <button onClick={handleReset} className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold text-sm\">\r\n                                    Reset Semua Data\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'products' && (\r\n                    <div className=\"animate-fade-in bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                        <div className=\"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold font-serif\">Manajemen Inventaris</h2>\r\n                                <p className=\"text-sm text-gray-400\">Kelola menu, harga, dan stok barang.</p>\r\n                            </div>\r\n                            {user.role === 'admin' && (\r\n                                <button onClick={openAddModal} className=\"px-4 py-2 bg-forest text-gold rounded-lg font-bold flex items-center gap-2 hover:bg-forest-light shadow transition hover:-translate-y-1\">\r\n                                    <Plus size={18} /> Tambah Menu\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-left border-collapse\">\r\n                                <thead className=\"bg-gray-50 text-xs uppercase text-gray-500 font-bold tracking-wider\">\r\n                                    <tr>\r\n                                        <th className=\"p-4 w-20\">Gambar</th>\r\n                                        <th className=\"p-4\">Nama Produk</th>\r\n                                        <th className=\"p-4\">Kategori</th>\r\n                                        <th className=\"p-4\">Stok</th>\r\n                                        <th className=\"p-4 text-right\">Harga</th>\r\n                                        {user.role === 'admin' && <th className=\"p-4 text-right\">Aksi</th>}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-gray-100\">\r\n                                    {products.map(item => (\r\n                                        <tr key={item.id} className=\"hover:bg-blue-50/50 transition bg-white\">\r\n                                            <td className=\"p-4\">\r\n                                                <div className=\"w-12 h-12 rounded-lg bg-gray-100 overflow-hidden border border-gray-200\">\r\n                                                    {item.image ? (\r\n                                                        <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" />\r\n                                                    ) : <ImageIcon className=\"m-auto text-gray-300 mt-3\" />}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                <p className=\"font-bold text-gray-800\">{item.name}</p>\r\n                                                <p className=\"text-xs text-gray-400 line-clamp-1\">{item.description}</p>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                <span className=\"px-2 py-1 text-xs rounded border border-gray-200 bg-gray-50 font-bold text-gray-600 uppercase\">\r\n                                                    {item.category}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className={`font-mono font-bold text-lg ${item.stock === 0 ? 'text-red-500' :\r\n                                                        item.stock <= (item.minStockThreshold || 5) ? 'text-yellow-600' : 'text-green-600'\r\n                                                        }`}>\r\n                                                        {item.stock}\r\n                                                    </span>\r\n                                                    {item.stock <= (item.minStockThreshold || 5) && (\r\n                                                        <AlertTriangle size={16} className={`text-yellow-500 ${item.stock === 0 && 'hidden'}`} />\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-right font-mono font-bold text-forest\">\r\n                                                Rp {item.price.toLocaleString('id-ID')}\r\n                                            </td>\r\n                                            {user.role === 'admin' && (\r\n                                                <td className=\"p-4 text-right\">\r\n                                                    <div className=\"flex justify-end gap-2\">\r\n                                                        <button onClick={() => openEditModal(item)} className=\"p-2 text-blue-600 hover:bg-blue-50 rounded transition\"><Edit size={16} /></button>\r\n                                                        <button onClick={() => handleDelete(item.id, item.name)} className=\"p-2 text-red-600 hover:bg-red-50 rounded transition\"><Trash size={16} /></button>\r\n                                                    </div>\r\n                                                </td>\r\n                                            )}\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'logs' && user.role === 'admin' && (\r\n                    <div className=\"animate-fade-in bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n                        <div className=\"flex items-center gap-3 mb-6\">\r\n                            <div className=\"p-2 bg-purple-100 text-purple-600 rounded-lg\"><History size={24} /></div>\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold font-serif\">Log Aktivitas</h2>\r\n                                <p className=\"text-sm text-gray-500\">Rekam jejak tindakan sistem.</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            {logs.length === 0 && <p className=\"text-center text-gray-400 italic py-8\">Belum ada aktivitas tercatat.</p>}\r\n                            {logs.map(log => (\r\n                                <div key={log.id} className=\"flex gap-4 p-4 border-b border-gray-50 last:border-0 hover:bg-gray-50 transition\">\r\n                                    <div className=\"text-xs font-mono text-gray-400 w-32 pt-1\">\r\n                                        {new Date(log.timestamp).toLocaleString('id-ID')}\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex gap-2 items-center mb-1\">\r\n                                            <span className={`text-xs font-bold px-2 py-0.5 rounded ${log.action.includes('DELETE') ? 'bg-red-100 text-red-600' :\r\n                                                log.action.includes('CREATE') ? 'bg-green-100 text-green-600' :\r\n                                                    'bg-blue-100 text-blue-600'\r\n                                                }`}>\r\n                                                {log.action}\r\n                                            </span>\r\n                                            <span className=\"font-bold text-sm text-gray-700\">{log.user}</span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-gray-600\">{log.details}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n\r\n            {/* Modal Form */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\">\r\n                    <div className=\"bg-white text-forest rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl animate-scale-in\">\r\n                        <div className=\"p-6 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10\">\r\n                            <h3 className=\"text-xl font-bold font-serif\">{editingId ? 'Edit Produk' : 'Tambah Produk Baru'}</h3>\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"p-2 hover:bg-gray-100 rounded-full\"><X size={20} /></button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 space-y-6\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-gray-600\">Nama Produk</label>\r\n                                    <input\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-forest\"\r\n                                        value={formData.name}\r\n                                        onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-gray-600\">Harga (Rp)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-forest\"\r\n                                        value={formData.price}\r\n                                        onChange={e => setFormData({ ...formData, price: Number(e.target.value) })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4 bg-yellow-50 p-4 rounded-lg border border-yellow-100\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-yellow-800\">Stok Saat Ini (Cup)</label>\r\n                                    <input type=\"number\" className=\"w-full p-2 border border-yellow-300 rounded\" value={formData.stock} onChange={e => setFormData({ ...formData, stock: Number(e.target.value) })} />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-yellow-800\">Batas Min. Alert</label>\r\n                                    <input type=\"number\" className=\"w-full p-2 border border-yellow-300 rounded\" value={formData.minStockThreshold} onChange={e => setFormData({ ...formData, minStockThreshold: Number(e.target.value) })} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-bold text-gray-600\">Deskripsi</label>\r\n                                <textarea\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-forest h-24\"\r\n                                    value={formData.description}\r\n                                    onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-gray-600\">Kategori</label>\r\n                                    <select\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-forest bg-white\"\r\n                                        value={formData.category}\r\n                                        onChange={e => setFormData({ ...formData, category: e.target.value as any })}\r\n                                    >\r\n                                        <option value=\"signature\">Signature (Khas)</option>\r\n                                        <option value=\"classic\">Classic Tea</option>\r\n                                        <option value=\"milk\">Milk Base</option>\r\n                                        <option value=\"fruit\">Fruit Series</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm font-bold text-gray-600\">URL Gambar</label>\r\n                                    <input\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-forest\"\r\n                                        value={formData.image}\r\n                                        placeholder=\"/images/example.png\"\r\n                                        onChange={e => setFormData({ ...formData, image: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-50 p-4 rounded-xl space-y-4 border border-gray-200\">\r\n                                <h4 className=\"font-bold flex items-center gap-2\">\r\n                                    <span className=\"w-2 h-6 bg-gold rounded-full\"></span>\r\n                                    Analisis Rasa (Algoritma)\r\n                                </h4>\r\n                                <div className=\"space-y-4\">\r\n                                    {/* Simple sliders */}\r\n                                    {['sweet', 'creamy', 'fruity'].map(attr => (\r\n                                        <div key={attr}>\r\n                                            <div className=\"flex justify-between text-sm mb-1 uppercase font-bold text-gray-500\">\r\n                                                <span>{attr}</span>\r\n                                                <span>{formData.attributes[attr as keyof typeof formData.attributes]}/10</span>\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"range\" min=\"0\" max=\"10\"\r\n                                                className=\"w-full accent-forest\"\r\n                                                value={formData.attributes[attr as keyof typeof formData.attributes]}\r\n                                                onChange={e => setFormData({ ...formData, attributes: { ...formData.attributes, [attr]: Number(e.target.value) } })}\r\n                                            />\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 border-t border-gray-100 flex justify-end gap-3 sticky bottom-0 bg-white z-10\">\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"px-6 py-2 rounded-lg border border-gray-300 hover:bg-gray-50\">Batal</button>\r\n                            <button onClick={handleSave} className=\"px-6 py-2 rounded-lg bg-gold text-forest font-bold hover:bg-gold-light flex items-center gap-2\">\r\n                                <Save size={18} /> Simpan Produk\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShoppingBag' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ShoppingBag"},"fix":{"range":[254,266],"text":""},"desc":"Remove unused variable \"ShoppingBag\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Image"},"fix":{"range":[331,362],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[693,696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[693,696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\TEHRAJA\\teh-raja\\app\\page.tsx:18:5\n  16 |\n  17 |   useEffect(() => {\n> 18 |     setIsClient(true);\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |\n  20 |     // PWA Install Prompt\n  21 |     window.addEventListener('beforeinstallprompt', (e) => {","line":18,"column":5,"nodeType":null,"endLine":18,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1050,1053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1050,1053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":145,"column":25,"nodeType":"JSXOpeningElement","endLine":145,"endColumn":199}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport Navbar from \"@/components/Navbar\";\nimport RecommendationQuiz from \"@/components/RecommendationQuiz\";\nimport { useCartStore, useProductStore } from \"@/lib/store\"; // Use dynamic store\nimport { motion } from \"framer-motion\";\nimport { ShoppingBag, Star, ArrowDown, AlertTriangle, Download } from \"lucide-react\";\nimport Image from \"next/image\";\nimport { useState, useEffect } from \"react\";\n\nexport default function Home() {\n  const addToCart = useCartStore((state) => state.addToCart);\n  const products = useProductStore((state) => state.products); // Dynamic products\n  const [isClient, setIsClient] = useState(false);\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n\n  useEffect(() => {\n    setIsClient(true);\n\n    // PWA Install Prompt\n    window.addEventListener('beforeinstallprompt', (e) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n    });\n  }, []);\n\n  const handleInstall = () => {\n    if (deferredPrompt) {\n      deferredPrompt.prompt();\n      deferredPrompt.userChoice.then((choiceResult: any) => {\n        if (choiceResult.outcome === 'accepted') {\n          console.log('User accepted the install prompt');\n        }\n        setDeferredPrompt(null);\n      });\n    }\n  }\n\n  if (!isClient) return null; // Hydration fix\n\n  return (\n    <main className=\"min-h-screen bg-forest text-cream selection:bg-gold selection:text-forest\">\n      <Navbar />\n\n      {/* HERO SECTION */}\n      <section className=\"relative h-screen flex items-center justify-center overflow-hidden\">\n        <div className=\"absolute inset-0 z-0\">\n          {/* Abstract Background */}\n          <div className=\"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,_var(--color-gold-light)_0%,_transparent_20%)] opacity-20\" />\n          <div className=\"absolute bottom-0 right-0 w-full h-full bg-[radial-gradient(circle_at_bottom_left,_var(--color-forest-light)_0%,_transparent_40%)] opacity-40\" />\n        </div>\n\n        <div className=\"container relative z-10 px-6 text-center\">\n          <motion.h1\n            initial={{ y: 50, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ duration: 0.8 }}\n            className=\"text-4xl md:text-6xl lg:text-8xl font-serif font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-b from-gold-light to-gold\"\n          >\n            TEH RAJA\n          </motion.h1>\n          <motion.p\n            initial={{ y: 30, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ duration: 0.8, delay: 0.2 }}\n            className=\"text-xl md:text-2xl opacity-80 max-w-2xl mx-auto mb-10 font-light\"\n          >\n            Kemewahan dalam Setiap Tegukan. Rasakan perpaduan sempurna tradisi dan presisi.\n          </motion.p>\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ duration: 0.8, delay: 0.4 }}\n            className=\"flex gap-4 justify-center\"\n          >\n            <a href=\"#recommendation\" className=\"px-8 py-3 bg-gold text-forest font-bold rounded-full hover:scale-105 transition shadow-lg shadow-gold/20\">\n              Cari Teh Favorit\n            </a>\n            <a href=\"#menu\" className=\"px-8 py-3 border border-white/20 rounded-full hover:bg-white/5 transition backdrop-blur-sm\">\n              Lihat Menu\n            </a>\n          </motion.div>\n\n          {/* PWA Install Button (Only visible if proper criteria met) */}\n          {deferredPrompt && (\n            <motion.button\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              onClick={handleInstall}\n              className=\"mt-8 px-6 py-2 bg-white/10 backdrop-blur rounded-full text-sm hover:bg-white/20 transition flex items-center gap-2 mx-auto border border-white/10\"\n            >\n              <Download size={16} /> Install Aplikasi\n            </motion.button>\n          )}\n        </div>\n\n        <motion.div\n          animate={{ y: [0, 10, 0] }}\n          transition={{ repeat: Infinity, duration: 2 }}\n          className=\"absolute bottom-10 opacity-50\"\n        >\n          <ArrowDown />\n        </motion.div>\n      </section>\n\n      {/* RECOMMENDATION SECTION */}\n      <section id=\"recommendation\" className=\"py-20 bg-forest-light/10 relative\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"mb-12 text-center\">\n            <h2 className=\"text-4xl font-serif text-gold mb-4\">AI Tea Sommelier</h2>\n            <p className=\"opacity-60 max-w-md mx-auto\">\n              Bingung mau pilih apa? Biarkan algoritma cerdas kami menganalisis selera Anda dan menyarankan racikan sempurna untuk mood Anda hari ini.\n            </p>\n          </div>\n          <RecommendationQuiz />\n        </div>\n      </section>\n\n      {/* MENU GRID */}\n      <section id=\"menu\" className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <h2 className=\"text-4xl font-serif text-center mb-16\"><span className=\"border-b-2 border-gold pb-2\">Koleksi Raja</span></h2>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {products.length === 0 ? (\n              <div className=\"col-span-full text-center py-20 opacity-50\">\n                <p className=\"text-xl\">Belum ada menu yang tersedia.</p>\n              </div>\n            ) : (\n              products.map((product, idx) => (\n                <motion.div\n                  itemProp=\"product\"\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ delay: idx * 0.1 }}\n                  key={product.id}\n                  className={`group relative bg-white/5 border rounded-2xl overflow-hidden transition-colors ${product.stock <= 0 ? 'border-red-500/30 opacity-70' : 'border-white/5 hover:border-gold/30'\n                    }`}\n                >\n                  <div className=\"h-64 bg-black/20 relative overflow-hidden\">\n                    {/* Image / Placeholder */}\n                    <div className=\"absolute inset-0 flex items-center justify-center text-gold/20 font-serif text-4xl opacity-30\">\n                      {product.image ? (\n                        <img src={product.image} alt={product.name} className={`w-full h-full object-cover transition duration-700 group-hover:scale-110 ${product.stock <= 0 ? 'grayscale' : ''}`} />\n                      ) : (\n                        <span>{product.name[0]}</span>\n                      )}\n                    </div>\n\n                    {/* STATUS BADGES */}\n                    <div className=\"absolute top-4 right-4 flex flex-col gap-2 items-end\">\n                      {product.category === 'signature' && (\n                        <span className=\"bg-gold text-forest text-xs font-bold px-3 py-1 rounded-full shadow-lg\">Signature</span>\n                      )}\n                      {product.stock <= 0 ? (\n                        <span className=\"bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg\">SOLD OUT</span>\n                      ) : product.stock <= (product.minStockThreshold || 5) && (\n                        <span className=\"bg-yellow-500 text-forest text-xs font-bold px-3 py-1 rounded-full shadow-lg flex items-center gap-1\">\n                          <AlertTriangle size={10} /> Limited: {product.stock}\n                        </span>\n                      )}\n                    </div>\n\n                    {/* OVERLAY ACTION */}\n                    <div className={`absolute inset-0 bg-black/60 opacity-0 transition duration-300 flex items-center justify-center ${product.stock > 0 ? 'group-hover:opacity-100' : ''}`}>\n                      <button\n                        onClick={() => addToCart(product)}\n                        disabled={product.stock <= 0}\n                        className=\"bg-gold text-forest px-6 py-2 rounded-full font-bold transform translate-y-4 group-hover:translate-y-0 transition duration-300 hover:scale-105\"\n                      >\n                        Tambah ke Tray\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"p-6\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <h3 className=\"text-xl font-serif font-bold\">{product.name}</h3>\n                    </div>\n                    <p className=\"text-sm opacity-60 mb-4 h-10 overflow-hidden line-clamp-2\">{product.description}</p>\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-lg font-bold text-gold-light\">Rp {product.price.toLocaleString('id-ID')}</span>\n                      <div className=\"flex gap-1\">\n                        {[...Array(5)].map((_, i) => (\n                          <Star\n                            key={i}\n                            size={12}\n                            className=\"text-gold fill-gold\"\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              ))\n            )}\n          </div>\n        </div>\n      </section>\n\n      {/* FOOTER */}\n      <footer className=\"bg-black/40 py-10 border-t border-white/5 text-center text-sm opacity-40\">\n        <p>TEH RAJA &copy; 2026. M. YARZUQ WILDANI [0402231058]. Dibuat untuk Praktik Kerja Lapangan.</p>\n      </footer>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\components\\CartDrawer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[970,973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[970,973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":139,"column":49,"nodeType":"JSXOpeningElement","endLine":139,"endColumn":147}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useCartStore, useSalesStore, useProductStore } from \"@/lib/store\";\r\nimport { X, Minus, Plus, Trash2, MessageCircle, Edit3 } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport ReceiptModal from \"./ReceiptModal\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\ninterface CartDrawerProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function CartDrawer({ isOpen, onClose }: CartDrawerProps) {\r\n    const { items, removeFromCart, updateQuantity, total, clearCart } = useCartStore();\r\n    const { addOrder, addLog } = useSalesStore();\r\n    const { products, decrementStock } = useProductStore();\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [table, setTable] = useState(\"\");\r\n    const [notes, setNotes] = useState<Record<string, string>>({});\r\n    const [showReceipt, setShowReceipt] = useState(false);\r\n    const [lastOrder, setLastOrder] = useState<any>(null);\r\n\r\n    const checkStock = () => {\r\n        const outOfStockItems = items.filter(cartItem => {\r\n            const product = products.find(p => p.id === cartItem.id);\r\n            return !product || product.stock < cartItem.quantity;\r\n        });\r\n        return outOfStockItems;\r\n    };\r\n\r\n    const handleCheckout = () => {\r\n        if (!name) {\r\n            alert(\"Mohon isi nama Anda\");\r\n            return;\r\n        }\r\n\r\n        const outOfStock = checkStock();\r\n        if (outOfStock.length > 0) {\r\n            alert(`Maaf, stok tidak cukup untuk: ${outOfStock.map(i => i.name).join(\", \")}`);\r\n            return;\r\n        }\r\n\r\n        const itemsWithNotes = items.map(item => ({\r\n            ...item,\r\n            note: notes[item.id] || \"\"\r\n        }));\r\n\r\n        const newOrder = {\r\n            id: nanoid(),\r\n            date: new Date().toISOString(),\r\n            items: itemsWithNotes,\r\n            total: total(),\r\n            customerName: name,\r\n            cashierName: \"Web Store\"\r\n        };\r\n\r\n        addOrder(newOrder);\r\n        addLog(\"SALE\", `Order ${newOrder.id.slice(0, 6)} by ${name}`, \"Customer (Web)\");\r\n        decrementStock(itemsWithNotes);\r\n\r\n        setLastOrder(newOrder);\r\n\r\n        let message = `*PESANAN BARU - TEH RAJA*\\n`;\r\n        message += `Nama: ${name}\\n`;\r\n        message += `Meja: ${table || 'Takeaway/Bungkus'}\\n`;\r\n        message += `Order ID: ${newOrder.id.slice(0, 6)}\\n`;\r\n        message += `----------------\\n`;\r\n        itemsWithNotes.forEach(item => {\r\n            message += `${item.quantity}x ${item.name} (${(item.quantity * item.price).toLocaleString('id-ID')})\\n`;\r\n            if (item.note) message += `   _catatan: ${item.note}_\\n`;\r\n        });\r\n        message += `----------------\\n`;\r\n        message += `Total: Rp ${total().toLocaleString('id-ID')}\\n`;\r\n        message += `Mohon diproses pesanan saya. Terima kasih!`;\r\n\r\n        const url = `https://wa.me/6285166500741?text=${encodeURIComponent(message)}`;\r\n        window.open(url, '_blank');\r\n\r\n        setShowReceipt(true);\r\n        clearCart();\r\n        setNotes({});\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {showReceipt && lastOrder && (\r\n                <ReceiptModal\r\n                    order={lastOrder}\r\n                    onClose={() => {\r\n                        setShowReceipt(false);\r\n                        onClose();\r\n                        setName(\"\");\r\n                        setTable(\"\");\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {isOpen && !showReceipt && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 0.5 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 z-40 backdrop-blur-sm\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ x: \"100%\" }}\r\n                        animate={{ x: 0 }}\r\n                        exit={{ x: \"100%\" }}\r\n                        transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                        className=\"fixed right-0 top-0 h-full w-full max-w-md bg-forest z-50 border-l border-gold/20 shadow-2xl flex flex-col\"\r\n                    >\r\n                        <div className=\"p-6 border-b border-white/10 flex justify-between items-center bg-forest-light/50\">\r\n                            <h2 className=\"text-2xl font-serif text-gold\">Tray Pesanan</h2>\r\n                            <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full\">\r\n                                <X />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n                            {items.length === 0 ? (\r\n                                <div className=\"text-center opacity-40 mt-20\">\r\n                                    <p>Tray Anda kosong.</p>\r\n                                    <p className=\"text-sm\">Silakan pilih minuman kesukaan Anda.</p>\r\n                                </div>\r\n                            ) : (\r\n                                items.map((item) => {\r\n                                    const productLive = products.find(p => p.id === item.id);\r\n                                    const isAvailable = productLive ? (productLive.stock > 0 && productLive.isAvailable) : false;\r\n                                    const currentStock = productLive?.stock || 0;\r\n\r\n                                    return (\r\n                                        <div key={item.id} className={`bg-white/5 p-4 rounded-xl ${!isAvailable ? 'border border-red-500/50 bg-red-900/10' : ''}`}>\r\n                                            <div className=\"flex gap-4 items-center mb-3\">\r\n                                                <img src={item.image} alt={item.name} className=\"w-16 h-16 rounded-lg object-cover bg-white/10\" />\r\n                                                <div className=\"flex-1\">\r\n                                                    <h4 className=\"font-serif font-bold text-gold-light\">{item.name}</h4>\r\n\r\n                                                    {!isAvailable ? (\r\n                                                        <p className=\"text-xs text-red-400 font-bold uppercase tracking-wider\">Stok Habis</p>\r\n                                                    ) : (\r\n                                                        <p className=\"text-sm opacity-60\">Rp {item.price.toLocaleString('id-ID')}</p>\r\n                                                    )}\r\n\r\n                                                    <div className=\"flex items-center gap-3 mt-2\">\r\n                                                        <button\r\n                                                            onClick={() => updateQuantity(item.id, item.quantity - 1)}\r\n                                                            className=\"p-1 bg-white/10 rounded hover:bg-white/20\"\r\n                                                        >\r\n                                                            <Minus size={14} />\r\n                                                        </button>\r\n                                                        <span className=\"text-sm w-4 text-center\">{item.quantity}</span>\r\n                                                        <button\r\n                                                            onClick={() => {\r\n                                                                if (item.quantity < currentStock) {\r\n                                                                    updateQuantity(item.id, item.quantity + 1);\r\n                                                                } else {\r\n                                                                    alert(\"Stok maksimal tercapai\");\r\n                                                                }\r\n                                                            }}\r\n                                                            className={`p-1 bg-white/10 rounded hover:bg-white/20 ${item.quantity >= currentStock ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                                                        >\r\n                                                            <Plus size={14} />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <button onClick={() => removeFromCart(item.id)} className=\"text-red-400 hover:text-red-300\">\r\n                                                    <Trash2 size={18} />\r\n                                                </button>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2 bg-black/20 p-2 rounded-lg border border-white/5 focus-within:border-gold/50 transition\">\r\n                                                <Edit3 size={14} className=\"opacity-50\" />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    placeholder=\"Catatan (misal: Less Ice, Gula Sedikit)\"\r\n                                                    className=\"bg-transparent text-sm w-full focus:outline-none placeholder:text-white/20\"\r\n                                                    value={notes[item.id] || \"\"}\r\n                                                    onChange={(e) => setNotes({ ...notes, [item.id]: e.target.value })}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"p-6 bg-forest-light border-t border-gold/20 space-y-4\">\r\n                            <div className=\"flex justify-between text-xl font-serif text-gold\">\r\n                                <span>Total</span>\r\n                                <span>Rp {total().toLocaleString('id-ID')}</span>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Nama Pemesan (Wajib)\"\r\n                                    value={name}\r\n                                    onChange={(e) => setName(e.target.value)}\r\n                                    className=\"w-full p-3 bg-black/20 border border-white/10 rounded-lg focus:outline-none focus:border-gold text-white placeholder:text-white/30\"\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Nomor Meja (Opsional)\"\r\n                                    value={table}\r\n                                    onChange={(e) => setTable(e.target.value)}\r\n                                    className=\"w-full p-3 bg-black/20 border border-white/10 rounded-lg focus:outline-none focus:border-gold text-white placeholder:text-white/30\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleCheckout}\r\n                                disabled={items.length === 0}\r\n                                className=\"w-full py-4 bg-gold text-forest font-bold rounded-xl hover:bg-gold-light transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                <MessageCircle size={20} />\r\n                                Pesan via WhatsApp\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\components\\ReceiptModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Share2' is defined but never used.","line":5,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Share2"},"fix":{"range":[108,116],"text":""},"desc":"Remove unused variable \"Share2\"."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":62,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3086,3133],"text":"\r\n                                            &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3086,3133],"text":"\r\n                                            &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3086,3133],"text":"\r\n                                            &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3086,3133],"text":"\r\n                                            &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":62,"column":57,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3144,3187],"text":"&quot;\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3144,3187],"text":"&ldquo;\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3144,3187],"text":"&#34;\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3144,3187],"text":"&rdquo;\r\n                                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef } from \"react\";\r\nimport { Order } from \"@/lib/store\";\r\nimport { X, Download, Share2 } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface ReceiptModalProps {\r\n    order: Order;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function ReceiptModal({ order, onClose }: ReceiptModalProps) {\r\n    const receiptRef = useRef<HTMLDivElement>(null);\r\n\r\n    const handleDownload = () => {\r\n        window.print();\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm print:bg-white print:p-0\">\r\n            <motion.div\r\n                initial={{ scale: 0.9, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                className=\"bg-white text-black w-full max-w-sm rounded-lg overflow-hidden shadow-2xl relative print:shadow-none print:w-full print:max-w-none\"\r\n            >\r\n                {/* Header Actions (Hidden in Print) */}\r\n                <div className=\"absolute top-2 right-2 flex gap-2 print:hidden z-10\">\r\n                    <button onClick={onClose} className=\"p-1 bg-gray-100 rounded-full hover:bg-gray-200\">\r\n                        <X size={16} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Receipt Content */}\r\n                <div ref={receiptRef} className=\"p-8 bg-white font-mono text-sm relative\">\r\n                    {/* Paper Texture Effect */}\r\n                    <div className=\"absolute top-0 left-0 w-full h-2 bg-gradient-to-b from-gray-200 to-transparent opacity-20\" />\r\n\r\n                    <div className=\"text-center mb-6\">\r\n                        <h2 className=\"text-2xl font-bold uppercase tracking-widest border-b-2 border-black pb-2 mb-2\">TEH RAJA</h2>\r\n                        <p className=\"text-xs text-gray-500\">Authentic Tea & Blends</p>\r\n                        <p className=\"text-xs text-gray-500\">{new Date(order.date).toLocaleString('id-ID')}</p>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">Order ID: #{order.id.slice(0, 8)}</p>\r\n                    </div>\r\n\r\n                    <div className=\"mb-6 border-b border-dashed border-gray-300 pb-4\">\r\n                        <div className=\"flex justify-between mb-2 text-gray-600\">\r\n                            <span>Pelanggan</span>\r\n                            <span className=\"font-bold\">{order.customerName || \"Guest\"}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3 mb-6\">\r\n                        {order.items.map((item, index) => (\r\n                            <div key={index} className=\"flex justify-between items-start\">\r\n                                <div>\r\n                                    <div>\r\n                                        <span className=\"font-bold\">{item.quantity}x</span> {item.name}\r\n                                    </div>\r\n                                    {item.note && (\r\n                                        <div className=\"text-xs text-gray-500 italic pl-5\">\r\n                                            \"{item.note}\"\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <span>Rp {(item.price * item.quantity).toLocaleString('id-ID')}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"border-t-2 border-black pt-4 mb-8\">\r\n                        <div className=\"flex justify-between text-lg font-bold\">\r\n                            <span>TOTAL</span>\r\n                            <span>Rp {order.total.toLocaleString('id-ID')}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-center text-xs text-gray-400 space-y-1\">\r\n                        <p>Terima kasih telah berbelanja!</p>\r\n                        <p>Simpan struk ini sebagai bukti pembayaran.</p>\r\n                        <p>Follow us @tehraja.id</p>\r\n                    </div>\r\n\r\n                    {/* Jagged Bottom Edge */}\r\n                    <div className=\"absolute bottom-0 left-0 w-full h-4 bg-white\" style={{\r\n                        backgroundImage: 'linear-gradient(45deg, transparent 75%, white 75%), linear-gradient(-45deg, transparent 75%, white 75%)',\r\n                        backgroundSize: '20px 20px',\r\n                        backgroundPosition: '0 10px'\r\n                    }}></div>\r\n                </div>\r\n\r\n                {/* Footer Actions (Hidden in Print) */}\r\n                <div className=\"bg-gray-50 p-4 border-t border-gray-100 flex gap-3 print:hidden\">\r\n                    <button onClick={handleDownload} className=\"flex-1 py-2 bg-black text-white rounded font-bold hover:bg-gray-800 flex items-center justify-center gap-2\">\r\n                        <Download size={16} /> Simpan / Cetak\r\n                    </button>\r\n                    <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100\">\r\n                        Tutup\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\components\\RecommendationQuiz.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Product' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":17,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Product"},"fix":{"range":[181,219],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\TEHRAJA\\teh-raja\\components\\RecommendationQuiz.tsx:19:9\n  17 |\n  18 |     useEffect(() => {\n> 19 |         setIsClient(true);\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |     }, []);\n  21 |\n  22 |     const handleNext = () => {","line":19,"column":9,"nodeType":null,"endLine":19,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { getRecommendations } from \"@/lib/recommendation\";\r\nimport { Product } from \"@/data/menu\";\r\nimport { useCartStore, useProductStore, ExtendedProduct } from \"@/lib/store\"; // Import product store\r\nimport { ShoppingBag, RefreshCcw } from \"lucide-react\";\r\n\r\nexport default function RecommendationQuiz() {\r\n    const [step, setStep] = useState(0);\r\n    const [prefs, setPrefs] = useState({ sweet: 5, creamy: 5, fruity: 5 });\r\n    const [results, setResults] = useState<ExtendedProduct[]>([]);\r\n    const addToCart = useCartStore((state) => state.addToCart);\r\n    const products = useProductStore((state) => state.products); // Use dynamic products\r\n    const [isClient, setIsClient] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setIsClient(true);\r\n    }, []);\r\n\r\n    const handleNext = () => {\r\n        if (step < 3) {\r\n            setStep(step + 1);\r\n        } else {\r\n            const recs = getRecommendations(prefs, products); // Pass dynamic products\r\n            setResults(recs);\r\n            setStep(4);\r\n        }\r\n    };\r\n\r\n    const reset = () => {\r\n        setStep(0);\r\n        setResults([]);\r\n        setPrefs({ sweet: 5, creamy: 5, fruity: 5 });\r\n    };\r\n\r\n    const variants = {\r\n        enter: { opacity: 0, x: 50 },\r\n        center: { opacity: 1, x: 0 },\r\n        exit: { opacity: 0, x: -50 },\r\n    };\r\n\r\n    if (!isClient) return null;\r\n\r\n    return (\r\n        <div className=\"w-full max-w-2xl mx-auto p-8 rounded-2xl glass text-cream shadow-2xl border border-gold/20\">\r\n            <h2 className=\"text-3xl font-serif text-center text-gold mb-6\">Temukan Teh Idealmu</h2>\r\n\r\n            <div className=\"min-h-[300px] flex flex-col justify-center\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {step === 0 && (\r\n                        <motion.div key=\"intro\" initial=\"enter\" animate=\"center\" exit=\"exit\" variants={variants} className=\"text-center\">\r\n                            <p className=\"text-lg mb-8 opacity-90\">\r\n                                AI Sommelier kami akan menganalisis profil rasa Anda menggunakan Euclidean Vector Mapping untuk menemukan racikan terbaik.\r\n                            </p>\r\n                            <button onClick={() => setStep(1)} className=\"px-8 py-3 bg-gold text-forest font-bold rounded-full hover:bg-gold-light transition\">\r\n                                Mulai Analisis\r\n                            </button>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {step === 1 && (\r\n                        <motion.div key=\"sweet\" initial=\"enter\" animate=\"center\" exit=\"exit\" variants={variants}>\r\n                            <h3 className=\"text-xl mb-4 text-center\">Tingkat Kemanisan</h3>\r\n                            <input\r\n                                type=\"range\" min=\"0\" max=\"10\" value={prefs.sweet}\r\n                                onChange={(e) => setPrefs({ ...prefs, sweet: parseInt(e.target.value) })}\r\n                                className=\"w-full h-2 bg-forest-light rounded-lg appearance-none cursor-pointer accent-gold\"\r\n                            />\r\n                            <div className=\"flex justify-between mt-2 text-sm opacity-60\">\r\n                                <span>0% Gula</span>\r\n                                <span>50%</span>\r\n                                <span>100% Manis</span>\r\n                            </div>\r\n                            <div className=\"mt-8 text-center\">\r\n                                <button onClick={handleNext} className=\"px-6 py-2 border border-gold/50 rounded-full hover:bg-gold/10\">Lanjut</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {step === 2 && (\r\n                        <motion.div key=\"creamy\" initial=\"enter\" animate=\"center\" exit=\"exit\" variants={variants}>\r\n                            <h3 className=\"text-xl mb-4 text-center\">Tingkat Creamy</h3>\r\n                            <input\r\n                                type=\"range\" min=\"0\" max=\"10\" value={prefs.creamy}\r\n                                onChange={(e) => setPrefs({ ...prefs, creamy: parseInt(e.target.value) })}\r\n                                className=\"w-full h-2 bg-forest-light rounded-lg appearance-none cursor-pointer accent-gold\"\r\n                            />\r\n                            <div className=\"flex justify-between mt-2 text-sm opacity-60\">\r\n                                <span>Ringan / Bening</span>\r\n                                <span>Seimbang</span>\r\n                                <span>Kental & Creamy</span>\r\n                            </div>\r\n                            <div className=\"mt-8 text-center\">\r\n                                <button onClick={handleNext} className=\"px-6 py-2 border border-gold/50 rounded-full hover:bg-gold/10\">Lanjut</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {step === 3 && (\r\n                        <motion.div key=\"fruity\" initial=\"enter\" animate=\"center\" exit=\"exit\" variants={variants}>\r\n                            <h3 className=\"text-xl mb-4 text-center\">Aroma Buah & Floral</h3>\r\n                            <input\r\n                                type=\"range\" min=\"0\" max=\"10\" value={prefs.fruity}\r\n                                onChange={(e) => setPrefs({ ...prefs, fruity: parseInt(e.target.value) })}\r\n                                className=\"w-full h-2 bg-forest-light rounded-lg appearance-none cursor-pointer accent-gold\"\r\n                            />\r\n                            <div className=\"flex justify-between mt-2 text-sm opacity-60\">\r\n                                <span>Tidak Ada</span>\r\n                                <span>Samar</span>\r\n                                <span>Sangat Terasa</span>\r\n                            </div>\r\n                            <div className=\"mt-8 text-center\">\r\n                                <button onClick={handleNext} className=\"px-8 py-3 bg-gold text-forest font-bold rounded-full hover:bg-gold-light\">Lihat Hasil</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {step === 4 && (\r\n                        <motion.div key=\"results\" initial=\"enter\" animate=\"center\" exit=\"exit\" variants={variants} className=\"space-y-4\">\r\n                            <h3 className=\"text-xl text-center text-gold mb-4\">3 Rekomendasi Teratas</h3>\r\n                            <div className=\"grid gap-3\">\r\n                                {results.map((p, idx) => (\r\n                                    <div key={p.id} className=\"flex items-center justify-between bg-forest-light/30 p-3 rounded-lg border border-white/5\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className=\"text-2xl font-serif text-gold/50\">#{idx + 1}</span>\r\n                                            <div>\r\n                                                <p className=\"font-serif font-bold text-lg\">{p.name}</p>\r\n                                                <p className=\"text-xs opacity-60\">Rp {p.price.toLocaleString('id-ID')}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => addToCart(p)}\r\n                                            className=\"p-2 bg-gold text-forest rounded-full hover:scale-105 transition\"\r\n                                        >\r\n                                            <ShoppingBag size={18} />\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"text-center mt-6\">\r\n                                <button onClick={reset} className=\"flex items-center justify-center gap-2 mx-auto text-sm opacity-60 hover:opacity-100 hover:text-gold\">\r\n                                    <RefreshCcw size={14} /> Atur Ulang Preferensi\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\components\\ReportGenerator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Download"},"fix":{"range":[134,143],"text":""},"desc":"Remove unused variable \"Download\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1448,1451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1448,1451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":57,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":57,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1955,1968],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":67,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":67,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2244,2257],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { Order } from \"@/lib/store\";\r\nimport { Download, FileText } from \"lucide-react\";\r\n\r\ninterface ReportGeneratorProps {\r\n    orders: Order[];\r\n}\r\n\r\nexport default function ReportGenerator({ orders }: ReportGeneratorProps) {\r\n\r\n    const generatePDF = () => {\r\n        const doc = new jsPDF();\r\n\r\n        // --- Header ---\r\n        doc.setFillColor(26, 77, 62); // Forest Green\r\n        doc.rect(0, 0, 210, 30, 'F');\r\n\r\n        doc.setTextColor(255, 255, 255);\r\n        // doc.setFont(\"times\", \"bold\"); // Removing custom font for now to avoid issues\r\n        doc.setFontSize(22);\r\n        doc.text(\"TEH RAJA\", 105, 15, { align: \"center\" });\r\n\r\n        doc.setFontSize(10);\r\n        // doc.setFont(\"helvetica\", \"normal\");\r\n        doc.text(\"Authentic Premium Tea | Est. 2024\", 105, 22, { align: \"center\" });\r\n\r\n        // --- Info ---\r\n        doc.setTextColor(0, 0, 0);\r\n        doc.setFontSize(14);\r\n        doc.text(\"Laporan Penjualan Harian\", 14, 45);\r\n\r\n        doc.setFontSize(10);\r\n        doc.text(`Tanggal Cetak: ${new Date().toLocaleString('id-ID')}`, 14, 52);\r\n\r\n        const total = orders.reduce((acc, curr) => acc + curr.total, 0);\r\n        doc.text(`Total Omset: Rp ${total.toLocaleString('id-ID')}`, 14, 58);\r\n\r\n        // --- Table ---\r\n        const tableColumn = [\"Order\", \"Waktu\", \"Kasir\", \"Detail\", \"Total\"];\r\n        const tableRows: any[] = [];\r\n\r\n        orders.forEach(order => {\r\n            const itemsString = order.items.map(i => `${i.name} (x${i.quantity})`).join(', ');\r\n            const orderData = [\r\n                order.id.substring(0, 6),\r\n                new Date(order.date).toLocaleTimeString('id-ID'),\r\n                order.customerName || \"Guest\",\r\n                itemsString,\r\n                `Rp ${order.total.toLocaleString('id-ID')}`\r\n            ];\r\n            tableRows.push(orderData);\r\n        });\r\n\r\n        // @ts-ignore\r\n        autoTable(doc, {\r\n            head: [tableColumn],\r\n            body: tableRows,\r\n            startY: 65,\r\n            theme: 'grid',\r\n            headStyles: { fillColor: [212, 175, 55], textColor: [26, 77, 62] },\r\n        });\r\n\r\n        // --- Footer ---\r\n        // @ts-ignore\r\n        const finalY = doc.lastAutoTable.finalY || 150;\r\n\r\n        doc.setFontSize(10);\r\n        doc.text(\"Mengetahui,\", 160, finalY + 20, { align: 'center' });\r\n        doc.text(\"( Manajer )\", 160, finalY + 40, { align: 'center' });\r\n\r\n        doc.save(`Laporan_Harian_${new Date().toISOString().split('T')[0]}.pdf`);\r\n    };\r\n\r\n    return (\r\n        <button onClick={generatePDF} className=\"flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded shadow hover:bg-red-700 transition\">\r\n            <FileText size={16} /> Export PDF (Resmi)\r\n        </button>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\data\\menu.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\lib\\recommendation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'products' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"products"},"fix":{"range":[9,18],"text":""},"desc":"Remove unused variable \"products\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { products, Product } from '@/data/menu';\r\n\r\ntype UserPreferences = {\r\n    sweet: number;\r\n    creamy: number;\r\n    fruity: number;\r\n};\r\n\r\n// Calculate Euclidean Distance between two vectors\r\nfunction calculateDistance(pref: UserPreferences, input: UserPreferences): number {\r\n    return Math.sqrt(\r\n        Math.pow(pref.sweet - input.sweet, 2) +\r\n        Math.pow(pref.creamy - input.creamy, 2) +\r\n        Math.pow(pref.fruity - input.fruity, 2)\r\n    );\r\n}\r\n\r\nexport function getRecommendations<T extends Product>(preferences: UserPreferences, currentProducts: T[]): T[] {\r\n    // Sort products by distance (closest is best match)\r\n    const ranked = currentProducts.map((product) => {\r\n        const distance = calculateDistance(preferences, product.attributes);\r\n        return { ...product, score: distance };\r\n    }).sort((a, b) => a.score - b.score);\r\n\r\n    // Return top 3 matches\r\n    return ranked.slice(0, 3);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\lib\\store.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'get' is defined but never used.","line":135,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport { Product, products as initialProducts } from '@/data/menu';\r\n\r\n// --- Types ---\r\nexport type Role = 'admin' | 'cashier';\r\n\r\nexport interface User {\r\n    username: string;\r\n    role: Role;\r\n    name: string;\r\n}\r\n\r\nexport type CartItem = Product & {\r\n    quantity: number;\r\n    note?: string;\r\n};\r\n\r\nexport interface ExtendedProduct extends Product {\r\n    isAvailable: boolean;\r\n    stock: number; // [NEW] Real stock tracking\r\n    minStockThreshold?: number; // [NEW] Warning level\r\n}\r\n\r\nexport interface ActivityLog {\r\n    id: string;\r\n    timestamp: string;\r\n    action: string;\r\n    details: string;\r\n    user: string; // \"Admin\" or \"Kasir\"\r\n}\r\n\r\nexport interface Order {\r\n    id: string;\r\n    date: string; // ISO String\r\n    items: CartItem[];\r\n    total: number;\r\n    customerName?: string;\r\n    cashierName?: string; // [NEW] Track who sold it\r\n}\r\n\r\n// --- Stores ---\r\n\r\ninterface CartState {\r\n    items: CartItem[];\r\n    addToCart: (product: ExtendedProduct) => void;\r\n    removeFromCart: (productId: string) => void;\r\n    updateQuantity: (productId: string, quantity: number) => void;\r\n    clearCart: () => void;\r\n    total: () => number;\r\n}\r\n\r\ninterface ProductState {\r\n    products: ExtendedProduct[];\r\n    addProduct: (product: ExtendedProduct) => void;\r\n    updateProduct: (id: string, updated: Partial<ExtendedProduct>) => void;\r\n    deleteProduct: (id: string) => void;\r\n    toggleAvailability: (id: string) => void;\r\n    decrementStock: (items: CartItem[]) => void; // [NEW]\r\n}\r\n\r\ninterface SalesState {\r\n    orders: Order[];\r\n    logs: ActivityLog[]; // [NEW]\r\n    addOrder: (order: Order) => void;\r\n    addLog: (action: string, details: string, user: string) => void; // [NEW]\r\n    getDailySales: () => { date: string; total: number; count: number }[];\r\n    getProductPopularity: () => { name: string; count: number }[];\r\n    resetData: () => void;\r\n}\r\n\r\ninterface AuthState {\r\n    user: User | null;\r\n    login: (username: string, role: Role) => void;\r\n    logout: () => void;\r\n}\r\n\r\n// --- Implementations ---\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n    persist(\r\n        (set) => ({\r\n            user: null,\r\n            login: (username, role) => set({ user: { username, role, name: username === 'admin' ? 'Administrator' : 'Staff Kasir' } }),\r\n            logout: () => set({ user: null }),\r\n        }),\r\n        { name: 'teh-raja-auth' }\r\n    )\r\n);\r\n\r\nexport const useCartStore = create<CartState>()(\r\n    persist(\r\n        (set, get) => ({\r\n            items: [],\r\n            addToCart: (product) => {\r\n                set((state) => {\r\n                    // Check stock first (Double check)\r\n                    if (product.stock <= 0) return state;\r\n\r\n                    const existing = state.items.find((i) => i.id === product.id);\r\n                    if (existing) {\r\n                        // Prevent adding more than stock\r\n                        if (existing.quantity >= product.stock) return state;\r\n\r\n                        return {\r\n                            items: state.items.map((i) =>\r\n                                i.id === product.id ? { ...i, quantity: i.quantity + 1 } : i\r\n                            ),\r\n                        };\r\n                    }\r\n                    return { items: [...state.items, { ...product, quantity: 1 }] };\r\n                });\r\n            },\r\n            removeFromCart: (productId) => {\r\n                set((state) => ({ items: state.items.filter((i) => i.id !== productId) }));\r\n            },\r\n            updateQuantity: (productId, quantity) => {\r\n                set((state) => ({\r\n                    items: quantity > 0\r\n                        ? state.items.map((i) => (i.id === productId ? { ...i, quantity } : i))\r\n                        : state.items.filter((i) => i.id !== productId),\r\n                }));\r\n            },\r\n            clearCart: () => set({ items: [] }),\r\n            total: () => get().items.reduce((acc, item) => acc + item.price * item.quantity, 0),\r\n        }),\r\n        {\r\n            name: 'teh-raja-cart',\r\n        }\r\n    )\r\n);\r\n\r\nexport const useProductStore = create<ProductState>()(\r\n    persist(\r\n        (set, get) => ({\r\n            products: initialProducts.map(p => ({\r\n                ...p,\r\n                isAvailable: true,\r\n                stock: 50, // Default stock for new install\r\n                minStockThreshold: 10\r\n            })),\r\n            addProduct: (product) => set((state) => ({ products: [...state.products, product] })),\r\n            updateProduct: (id, updated) => set((state) => ({\r\n                products: state.products.map((p) => (p.id === id ? { ...p, ...updated } : p))\r\n            })),\r\n            deleteProduct: (id) => set((state) => ({\r\n                products: state.products.filter((p) => p.id !== id)\r\n            })),\r\n            toggleAvailability: (id) => set((state) => ({\r\n                products: state.products.map((p) => (p.id === id ? { ...p, isAvailable: !p.isAvailable } : p))\r\n            })),\r\n            decrementStock: (items) => set((state) => ({\r\n                products: state.products.map(p => {\r\n                    const found = items.find(i => i.id === p.id);\r\n                    if (found) {\r\n                        const newStock = Math.max(0, p.stock - found.quantity);\r\n                        return { ...p, stock: newStock, isAvailable: newStock > 0 };\r\n                    }\r\n                    return p;\r\n                })\r\n            }))\r\n        }),\r\n        {\r\n            name: 'teh-raja-products-v3', // Start fresh for \"Perfect\" version\r\n        }\r\n    )\r\n);\r\n\r\nexport const useSalesStore = create<SalesState>()(\r\n    persist(\r\n        (set, get) => ({\r\n            orders: [],\r\n            logs: [],\r\n            addOrder: (order) => set((state) => ({ orders: [...state.orders, order] })),\r\n            addLog: (action, details, user) => set((state) => ({\r\n                logs: [{\r\n                    id: crypto.randomUUID(),\r\n                    timestamp: new Date().toISOString(),\r\n                    action,\r\n                    details,\r\n                    user\r\n                }, ...state.logs].slice(0, 100) // Keep last 100 logs\r\n            })),\r\n            getDailySales: () => {\r\n                const orders = get().orders;\r\n                const salesMap = new Map<string, { total: number; count: number }>();\r\n\r\n                orders.forEach(order => {\r\n                    const date = new Date(order.date).toLocaleDateString('id-ID'); // Group by day\r\n                    const current = salesMap.get(date) || { total: 0, count: 0 };\r\n                    salesMap.set(date, {\r\n                        total: current.total + order.total,\r\n                        count: current.count + 1\r\n                    });\r\n                });\r\n\r\n                return Array.from(salesMap.entries())\r\n                    .map(([date, data]) => ({ date, ...data }))\r\n                    .slice(-7);\r\n            },\r\n            getProductPopularity: () => {\r\n                const orders = get().orders;\r\n                const popularityMap = new Map<string, number>();\r\n\r\n                orders.forEach(order => {\r\n                    order.items.forEach(item => {\r\n                        const currentCount = popularityMap.get(item.name) || 0;\r\n                        popularityMap.set(item.name, currentCount + item.quantity);\r\n                    });\r\n                });\r\n\r\n                return Array.from(popularityMap.entries())\r\n                    .map(([name, count]) => ({ name, count }))\r\n                    .sort((a, b) => b.count - a.count)\r\n                    .slice(0, 5); // Top 5\r\n            },\r\n            resetData: () => set({ orders: [], logs: [] })\r\n        }),\r\n        {\r\n            name: 'teh-raja-sales-v2',\r\n        }\r\n    )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\TEHRAJA\\teh-raja\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
